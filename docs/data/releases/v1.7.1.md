# Polkadot Fellows Runtime Release Analysis

## Release Comparison
- **Previous Release**: v1.7.0 (2025-08-23T10:53:08Z)
  - SDK Version: Unable to determine
- **Latest Release**: v1.7.1 (2025-08-28T15:06:07Z)
  - SDK Version: Unable to determine
- **Total PRs Merged**: 6


## AI-Generated Analysis

# Polkadot Fellows Runtimes v1.7.1 Release Analysis

## 1. Executive Summary for Non-Technical Users

**Main Improvements:**
- **Critical Bug Fix**: Fixed an important issue with how validator votes are counted when approving new blockchain blocks, making the network more secure and reliable
- **Code Cleanup**: Removed duplicate code to make the system more maintainable
- **Infrastructure Improvements**: Enhanced build and testing systems to work more reliably
- **New Bridge Features**: Added support for rewarding operators who help bridge assets between Polkadot and Ethereum networks

**Benefits for Users:**
- More reliable block production and validation
- Better preparation for future stability improvements
- Improved cross-chain asset transfers via Snowbridge (Ethereum bridge)

**Actions Needed:**
- No action required from regular users - these are backend improvements that work automatically

## 2. Key Changes Explained

### Security Improvements
- **Validator Vote Counting Fix**: Previously, there was a bug where validator group indices weren't properly mapped to vote indices when filtering backing statements for new blocks. This could potentially affect consensus reliability. The fix ensures votes are counted correctly, making the network more secure.

### Performance & Maintenance Improvements
- **Code Deduplication**: Removed custom duplicate code for handling fees on Kusama Asset Hub, replacing it with standard upstream components. This reduces maintenance burden and potential bugs.
- **CI/CD Improvements**: Enhanced the automated testing system to better handle disk space issues, making builds more reliable.

### New Features
- **Snowbridge Reward System**: Added infrastructure to properly handle rewards for relayers who operate the bridge between Polkadot and Ethereum networks. Rewards are now accumulated on BridgeHub in Ether and can be paid out through AssetHub.

### Breaking Changes
- None in this release - all changes are backward compatible

## 3. Technical Summary for Developers

### Major Changes
- **Runtime Version Bump**: All runtimes updated to spec version `1_007_001`
- **Dependency Update**: Upgraded `polkadot-runtime-parachains` from 21.0.0 to 21.0.1
- **Removed Custom Implementations**: Eliminated `FungiblesAdapter` custom implementation in favor of upstream `FungibleAdapter`

### Migration Requirements
- Standard runtime upgrade process applies
- No custom migrations required for this release
- All changes are backward compatible

### Technical Improvements
- Fixed group index to vote index mapping in parachain consensus ([polkadot-sdk#9564](https://github.com/paritytech/polkadot-sdk/pull/9564))
- Replaced custom fee handling adapter with standard implementation
- Enhanced CI disk space management for GitHub Actions
- Added comprehensive testing for Snowbridge reward payouts

### API Changes
- No breaking API changes
- Snowbridge reward payout functionality added to BridgeHub
- Weight calculations updated for Encointer treasury dispatchables

## 4. Code Impact Analysis

### Most Affected Components
1. **Runtime Specifications** (16 files): Version bumps across all runtime modules
2. **Asset Hub Kusama** (3 files): Major refactoring to remove custom fungible adapter (~160 lines removed)
3. **Bridge Hub Polkadot** (3 files): New Snowbridge reward functionality (~300 lines added)
4. **CI/CD Infrastructure** (1 file): Disk space management improvements
5. **Encointer Runtime** (4 files): Benchmark fixes and weight updates

### Types of Changes
- **Bug Fixes** (40%): Critical consensus fix, Encointer dispatchable improvements
- **Code Refactoring** (25%): Fungible adapter replacement, dependency updates
- **Infrastructure** (20%): CI improvements, release processes
- **New Features** (15%): Snowbridge reward system

### Change Distribution
- **High Impact/Low Risk**: Consensus bug fix (thoroughly tested upstream)
- **Medium Impact/Low Risk**: Code deduplication and cleanup
- **Low Impact/No Risk**: Infrastructure and tooling improvements
- **New Functionality/Low Risk**: Snowbridge rewards (additive feature)

This release focuses primarily on reliability improvements and technical debt reduction, with one significant new feature for cross-chain bridge operations. The changes are well-tested and maintain backward compatibility.

## Detailed PR List

### PR #870: Release 1.7.1
- **Author**: @sandreim
- **Merged**: 2025-08-28T15:06:07Z
- **Files Changed**: 16 (+21/-17)
- **Comments**: 4
- **Key Files Modified**:
  - `system-parachains/encointer/src/lib.rs`
  - `system-parachains/bridge-hubs/bridge-hub-polkadot/src/lib.rs`
  - `relay/polkadot/src/lib.rs`
  - `CHANGELOG.md`
  - `system-parachains/asset-hubs/asset-hub-polkadot/src/lib.rs`
  - ... and 11 more files

### PR #865: Support Snowbridge bridge reward payouts on AssetHub
- **Author**: @claravanstaden
- **Merged**: 2025-08-28T06:36:46Z
- **Files Changed**: 5 (+305/-11)
- **Comments**: 2
- **Key Files Modified**:
  - `system-parachains/bridge-hubs/bridge-hub-polkadot/tests/tests.rs`
  - `CHANGELOG.md`
  - `system-parachains/bridge-hubs/bridge-hub-polkadot/src/bridge_common_config.rs`
  - `integration-tests/emulated/tests/bridges/bridge-hub-polkadot/src/tests/mod.rs`
  - `integration-tests/emulated/tests/bridges/bridge-hub-polkadot/src/tests/snowbridge_v2_rewards.rs`

### PR #868: [Encointer] Minor Fixes and run benchmarks for new dispatchable
- **Author**: @clangenb
- **Merged**: 2025-08-27T11:48:54Z
- **Files Changed**: 4 (+78/-58)
- **Linked Issues**: #864, #679
- **Comments**: 12
- **Key Files Modified**:
  - `system-parachains/encointer/src/treasuries_xcm_payout.rs`
  - `system-parachains/encointer/src/weights/pallet_encointer_treasuries.rs`
  - `system-parachains/encointer/src/lib.rs`
  - `system-parachains/encointer/src/impls.rs`

### PR #858: add action to clean disk space before checkout
- **Author**: @pepoviola
- **Merged**: 2025-08-27T07:49:02Z
- **Files Changed**: 1 (+36/-0)
- **Comments**: 7
- **Key Files Modified**:
  - `.github/workflows/test.yml`

### PR #861: Remove custom fungible adapter
- **Author**: @athei
- **Merged**: 2025-08-26T13:03:49Z
- **Files Changed**: 3 (+12/-160)
- **Comments**: 3
- **Key Files Modified**:
  - `CHANGELOG.md`
  - `system-parachains/asset-hubs/asset-hub-kusamsrc/lib.rs`
  - `system-parachains/asset-hubs/asset-hub-kusamsrc/impls.rs`

### PR #859: Release 1.7.0
- **Author**: @acatangiu
- **Merged**: 2025-08-23T10:53:09Z
- **Files Changed**: 14 (+253/-202)
- **Comments**: 5
- **Key Files Modified**:
  - `system-parachains/encointer/src/lib.rs`
  - `system-parachains/bridge-hubs/bridge-hub-polkadot/src/lib.rs`
  - `relay/polkadot/src/lib.rs`
  - `CHANGELOG.md`
  - `system-parachains/asset-hubs/asset-hub-polkadot/src/lib.rs`
  - ... and 9 more files

